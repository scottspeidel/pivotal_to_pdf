#!/usr/bin/env ruby
$:.unshift(File.dirname(__FILE__) + '/../lib') unless $:.include?(File.dirname(__FILE__) + '/../lib')
require 'pivotal_to_pdf'
require 'thor'

class PivotalToPdfApp < Thor

  desc "story [STORY_IDs]", "print one or more stories specifed by ID into a PDF file. The card will have a color stripe. The color will be green for features, yellow for chores and red for bugs"
  def story(*story_ids)
    #what is the right way to accept 1 or more ids with Thor without using options?
    if(story_ids.empty?)
      puts 'ERROR: "pivotal_to_pdf story" was called with no arguments'
      puts 'Usage: "pivotal_to_pdf story [STORY_IDs]"'
      return
    end
    PivotalToPdf::Main.story story_ids
  end

  desc "current_iteration", "print stories for the current iteration into a PDF file"
  def current_iteration
    PivotalToPdf::Main.current_iteration
  end

  desc "iteration ITERATION-NUMBER", "print all the stories for the iteration specified into a PDF file"
  def iteration(iteration_number)
    PivotalToPdf::Main.iteration iteration_number
  end

  desc "label LABEL", "print stories for the label specified into a PDF file"
  def label(label_text)
    PivotalToPdf::Main.label label_text
  end

end

PivotalToPdfApp.start
